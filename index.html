<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>首页</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<!--标准mui.css-->
		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/style.css" />
		<link rel="stylesheet" href="css/global.css" />
		<style>
			html,
			body {
				height: 100%;
			}
			
			.mui-input-group {
				position: relative;
				padding: 0;
				border: 0;
				background-color: transparent;
			}
			
			.mui-input-group:before {
				position: absolute;
				top: 0;
				right: 0;
				left: 0;
				height: 1px;
				content: '';
				-webkit-transform: scaleY(.5);
				transform: scaleY(.5);
				background-color: transparent;
			}
			
			.mui-input-group:after {
				position: absolute;
				top: 0;
				right: 0;
				left: 0;
				height: 1px;
				content: '';
				-webkit-transform: scaleY(.5);
				transform: scaleY(.5);
				background-color: transparent;
			}
			
			.mui-input-group .mui-input-row:after {
				position: absolute;
				right: 0;
				bottom: 0;
				left: 15px;
				height: 1px;
				content: '';
				-webkit-transform: scaleY(.5);
				transform: scaleY(.5);
				background-color: transparent;
			}
			
			.mui-popup-inner {
				position: relative;
				padding: 15px;
				border-radius: 13px 13px 0 0;
				/* background: rgba(255,255,255,.95); */
				background-color: rgba(21, 82, 136, 1);
				color: white;
			}
			
			.mui-popup-button:first-child {
				border-radius: 0 0 0 13px;
				background-color: rgba(21, 82, 136, 1);
				color: white;
			}
			
			.mui-popup-button:last-child {
				border-radius: 0 0 13px;
				background-color: rgba(21, 82, 136, 1);
				color: white;
			}
			
			.mui-table-view:before {
				position: absolute;
				right: 0;
				left: 0;
				height: 1px;
				content: '';
				-webkit-transform: scaleY(.5);
				transform: scaleY(.5);
				background-color: transparent;
				top: -1px;
			}
			
			.mui-table-view:after {
				position: absolute;
				right: 0;
				left: 0;
				height: 1px;
				content: '';
				-webkit-transform: scaleY(.5);
				transform: scaleY(.5);
				background-color: transparent;
				top: -1px;
			}
			
			.mui-table-view-cell:after {
				position: absolute;
				right: 0;
				bottom: 0;
				left: 15px;
				height: 1px;
				content: '';
				-webkit-transform: scaleY(.5);
				transform: scaleY(.5);
				background-color: transparent;
			}
			
			.label-input-arrow {
				background: url(img/arrow.png) right center no-repeat !important;
			}
			
			.md-center {
				height: 100%;
				display: flex;
				justify-content: center;
				align-items: Center;
			}
			
			.md-center-form {
				width: 60%;
				height: 40%;
			}
			
			.md-input-group {
				border: solid 1px white;
				border-radius: 50px;
				margin-bottom: 20px;
				color: white;
			}
			
			.md-input-group:last-child {
				/*margin-bottom: 40px;*/
			}
			
			.md-label-input-split {
				width: 20% !important;
				text-align: center;
				border-right-style: solid;
				border-right-width: 1px;
				border-right-color: white;
			}
			
			.md-input-width {
				width: 75% !important;
			}
			
			.md-btn-out {
				width: 100%;
				margin-top: 40px;
			}
			
			.md-btn-inner {
				width: 100%;
				height: 45px;
				margin: auto;
				border: 1px solid rgba(255, 102, 52, 1);
				border-radius: 50px;
				background-color: rgba(255, 102, 52, 1);
			}
			
			#workshop {
				position: absolute;
				left: 5% !important;
				top: 15%;
				width: 90%;
				height: 70%;
			}
			
			#line {
				position: absolute;
				left: 5% !important;
				top: 15%;
				width: 90%;
				height: 70%;
			}
			
			#station {
				position: absolute;
				left: 5% !important;
				top: 15%;
				width: 90%;
				height: 70%;
			}
			
			.header-font-weight {
				color: white;
				font-size: 24px;
			}
			
			ul,
			menu,
			dir {
				display: block;
				list-style-type: disc;
				-webkit-margin-before: 0em;
				-webkit-margin-after: 0em;
				-webkit-margin-start: 0px;
				-webkit-margin-end: 0px;
				-webkit-padding-start: 0px;
			}
			
			.mui-table-view-cell.mui-active {
				background-color: rgba(102, 254, 203, 1);
			}
			
			.popver-card {
				height: 97%;
				background-color: transparent;
			}
			
			.md-scroll-wrapper {
				height: 100%;
				padding-top: 40px;
			}
			
			.md-table-view {
				font-size: 1.5rem;
				background-color: transparent !important;
			}
			
			.md-radio {
				color: white;
				border: solid 1px white;
				border-radius: 20px;
			}
			.md-input-radio{
				font-size: 2rem;
			}
		</style>
	</head>

	<body>
		<div class="mui-content md-center background" id="index">
			<form class="mui-input-group md-center-form">
				<div class="mui-input-row md-input-group">
					<label class="md-label-input-split">车间</label>
					<input type="text" readonly class="label-input-arrow md-input-width" v-model="workshopName" placeholder="请选择车间" @tap="onTapSelectPopover('workshop')">
				</div>
				<div class="mui-input-row md-input-group">
					<label class="md-label-input-split">产线</label>
					<input type="text" readonly class="label-input-arrow md-input-width" v-model="lineName" placeholder="选择产线" @tap="onTapSelectPopover('line')">
				</div>
				<div class="mui-input-row md-input-group">
					<label class="md-label-input-split">工位</label>
					<input type="text" readonly class="label-input-arrow md-input-width" v-model="stationName" placeholder="选择工位" @tap="onTapSelectPopover('station')">
				</div>
				<div class="mui-button-row md-btn-out">
					<button type="button" class="mui-btn mui-btn-primary md-btn-inner" @tap="onTapGoMain">确定</button>
				</div>
			</form>
			<div id="workshop" class="mui-popover background">
				<div class="mui-card popver-card">
					<div class="mui-card-header header-font-weight">
						<span>选择车间</span>
					</div>
					<div class=" mui-scroll-wrapper md-scroll-wrapper">
						<div class="mui-scroll">
							<ul class="mui-table-view mui-table-view-radio md-table-view">
								<li class="mui-table-view-cell md-input-border" v-for="(itemData,index) in workshops" :key="index" @tap="onItemSelectWorkshop('workshop',itemData,index)">
									<div class="mui-input-row mui-radio md-radio">
										<label v-text="itemData.name"></label>
										<input class="md-input-radio" name="radio" type="radio" v-bind:checked="itemData.checked">
									</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div id="line" class="mui-popover background">
				<div class="mui-card popver-card">
					<div class="mui-card-header header-font-weight">
						<span>选择产线</span>
					</div>
					<div class=" mui-scroll-wrapper md-scroll-wrapper">
						<div class="mui-scroll">
							<ul class="mui-table-view mui-table-view-radio md-table-view">
								<li class="mui-table-view-cell md-input-border" v-for="(itemData,index) in lines" :key="index" @tap="onItemSelectLine('line',itemData,index)">
									<div class="mui-input-row mui-radio md-radio">
										<label v-text="itemData.name"></label>
										<input class="md-input-radio" name="radio" type="radio" v-bind:checked="itemData.checked">
									</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div id="station" class="mui-popover background">
				<div class="mui-card popver-card">
					<div class="mui-card-header header-font-weight">
						<span>选择工位</span>
					</div>
					<div class=" mui-scroll-wrapper md-scroll-wrapper">
						<div class="mui-scroll">
							<ul class="mui-table-view mui-table-view-radio md-table-view">
								<li class="mui-table-view-cell md-input-border" v-for="(itemData,index) in stations" :key="index" @tap="onItemSelectStation('station',itemData,index)">
									<div class="mui-input-row mui-radio md-radio">
										<label v-text="itemData.name"></label>
										<input class="md-input-radio" name="radio" type="radio" v-bind:checked="itemData.checked">
									</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>

	<script type="text/javascript" src="js/vue.min.js"></script>
	<script src="js/mui.min.js"></script>
	<script type="text/javascript" src="config.js"></script>
	<script type="text/javascript" src="js/function.js"></script>
	<script>
		mui.init({
			swipeBack: false, //启用右滑关闭功能
			beforeback: function() {　　　
				mui.confirm("确定退出？", "<span style='font-style: oblique;'>ANDON</span>", ["取消", "确定"], function(e) {
					if(e.index == 1) {
						plus.runtime.quit();
					}
				}, 'div')
				return false;
			}
		});
		new Vue({
			el: '#index',
			data: {
				workshopName: '',
				lineName: '',
				stationName: '',
				configObj:{},
				workshops: [{
					id: 1,
					wid: 1,
					name: '车间 1',
					checked: false
				}, {
					id: 2,
					wid: 2,
					name: '车间 二',
					checked: false
				}],
				lines: [{
					id: 1,
					wid: 1,
					name: '产线1',
					checked: false
				}, {
					id: 2,
					wid: 2,
					name: '产线二',
					checked: false
				}],
				stations: [{
					id: 1,
					wid: 1,
					name: '工位1',
					checked: false
				}, {
					id: 2,
					wid: 2,
					name: '工位 二',
					checked: false
				}]
			},
			mounted() {
				mui('.mui-scroll-wrapper').scroll({
					indicators: true
				})
				mui.plusReady(function() {
					//console.log(JSON.stringify(plus.webview.currentWebview()));
					var _isLogin = getLsItem("isLogin");
					var _initData = {
						tabbarName: '',
						itemData: ''
					}
					if(_isLogin == null || _isLogin == undefined) {

					} else {
						mui.openWindow({
							url: 'apps/htmls/main.html',
							id: 'main'
						})
					}
				})
			},
			methods: {
				//进入主界面
				onTapGoMain() {
					setLsItem("isLogin", 'true')
					mui.openWindow({
						url: 'apps/htmls/main.html',
						id: 'main'
					})
				},
				//选择车间
				onTapSelectPopover(type) {
					mui('#'+type).popover('toggle')
				},
				//选择哪一个车间
				onItemSelectWorkshop(type,item, index) {
					this.workshopName = item.name
					mui('#'+type).popover('toggle');
				},
				//选择哪一个产线
				onItemSelectLine(type,item, index) {
					this.lineName = item.name
					mui('#'+type).popover('toggle')
				},
				//选择哪一个工位
				onItemSelectStation(type,item, index) {
					this.stationName = item.name
					mui('#'+type).popover('toggle')
				}
			}
		})
	</script>

</html>